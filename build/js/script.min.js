const body=document.querySelector(".body"),clientButtons=body.querySelectorAll(".beloved-client__item"),buttonLink=body.querySelector(".footer__link"),modal=body.querySelector(".modal"),overlay=body.querySelector(".overlay"),form=modal.querySelector(".modal__form"),formInputName=modal.querySelector(".modal__form-input--name"),formInputMail=modal.querySelector(".modal__form-input--mail"),formtextarea=modal.querySelector(".modal__form-input--textarea"),dataUrl="https://echo.htmlacademy.ru/",getTemplateContent=(e,o)=>e.querySelector(`#${o}`).content.querySelector(`.${o}`),success=getTemplateContent(body,"alert__success"),errorLoading=getTemplateContent(body,"alert__error-loading"),successElement=success.cloneNode(!0),successErrorLoading=errorLoading.cloneNode(!0),sendData=(e,o,t,r)=>{fetch(e,{method:"POST",body:o}).then((e=>{e.ok?t():r()})).catch((()=>{r()}))},onErrorRemove=()=>{successErrorLoading.remove(),document.removeEventListener("click",onErrorRemove)},onAddModal=e=>{e.preventDefault(),modal.classList.add("active"),overlay.classList.add("active"),body.classList.add("hidden")},onRemoveModal=()=>{modal.classList.remove("active"),overlay.classList.remove("active"),body.classList.remove("hidden")},alertError=()=>{onRemoveModal(),body.append(successErrorLoading),document.addEventListener("click",onErrorRemove)},onSuccessRemove=()=>{successElement.remove(),document.removeEventListener("click",onSuccessRemove)},alertSuccess=()=>{body.append(successElement),document.addEventListener("click",onSuccessRemove),onRemoveModal()},resetForm=()=>{formInputName.value="",formInputMail.value="",formtextarea.value=""},alert=()=>{body.append(successElement),document.addEventListener("click",onSuccessRemove),onRemoveModal(),formInputName.value="",formInputMail.value="",formtextarea.value=""},onFormSend=e=>{e.preventDefault();const o=new FormData(e.target);sendData(dataUrl,o,alert,alertError)},switchButton=e=>{for(let o of e)o.addEventListener("click",(t=>{t.preventDefault();for(let o of e)o.classList.remove("active");o.classList.add("active")}))};buttonLink.addEventListener("click",onAddModal),overlay.addEventListener("click",onRemoveModal),form.addEventListener("submit",onFormSend),switchButton(clientButtons);